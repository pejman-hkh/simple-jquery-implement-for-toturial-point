<!DOCTYPE html>
<html>
<head>
	<title></title>

</head>
<body>


<script type="text/javascript">
	(function( window ) {

		var Utils = {
			each : function( object, a ) {
				for( i = 0; i < object.length; i++ ) {
					a.call( object[i], i, object[i] );
				}
			}
		}

		function jQuery() {
			this.selector = '';
			this.selected = [];
		}

		jQuery.fn = jQuery.prototype;

		jQuery.fn.init = function( a ) {
			this.selector = a;
			if( typeof a === "function" ) {
				this.selector = window;
				return this.load( a );
			}

			return this;		
		}

		jQuery.fn.each = function( a ) {

			this.selected = this.selector;
			if( typeof this.selector == "string" ) {
				this.selected = document.querySelectorAll( this.selector );
			} else if( typeof this.selector == "object" ) {
				this.selected = [this.selector];
			}

			Utils.each( this.selected, a );		

			return this;
		}

		jQuery.fn.on = function( event, a ) {
			return this.each(function() {
				this.addEventListener( event, a );
			});				
		}

		jQuery.fn.trigger = function( a ) {
			var event = new MouseEvent( a , {
				'view': window,
				'bubbles': true,
				'cancelable': true
			} );

			return this.each(function() {
				return this.dispatchEvent( event );
			});
		}

		jQuery.fn.eq = function( a ) {
			this.selector = this.selected[a];
			return this;
		}

		jQuery.fn.html = function( a ) {

			if( typeof a === 'undefined' ) {
				html = '';
				this.eq(0).each(function() {
					html = this.innerHTML;
				});

				return html;			
			} else {

				return this.each(function() {
					this.innerHTML = a;
				});

			}
		}

		jQuery.fn.attr = function( a, b ) {
			if( typeof b === 'undefined' ) {
				var out = '';
				this.eq(0).each(function() {
					out = this.getAttribute( a );
				});

				return out;			
			} else {

				return this.each(function(  ) {
					this.setAttribute( a, b );
				});

			}
		}


		Utils.each( [  "focusin", "focusout", "load", "beforeunload", "unload", "change", "click", "dblclick", "focus", "blur", "reset", "submit", "resize", "scroll", "mouseover", "mouseout", "mouseup", "mousedown", "mouseenter", "mousemove", "mouseleave", "contextmenu", "wheel", "keydown", "keypress", "keyup", "select" ], function( k, name ) {
			jQuery.fn[ name ] = function( a ) {
				return this.on( name, a );
			};
		});


		var jQuery_instance;

		function get_instance() {
			jQuery_instance = new jQuery();
		}

		function $( a ) {
			if( typeof jQuery_instance === 'undefined' ) {
				get_instance();
			}

			return jQuery_instance.init( a );
		}


		window.$ = $;
		window.jQuery = jQuery;

	})( window );

	//plugin ...
	(function( $ ) {
		$.fn.hasClass = function( a ) {
			alert('In hasClass');

			return this;
		}
	})( jQuery );


	$(function() {
		$(".test").hasClass("test").click(function() {
			alert( $(this).html() );

			$(this).html('changed');

			alert( $(this).attr('class') );

		}).eq(0).trigger("click");


		$(".test").each(function() {
			alert( $(this).html() );
		});
	});

</script>


<div class="test ppp">test1</div>

<div class="test">test2</div>


</body>


</html>