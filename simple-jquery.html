<!DOCTYPE html>
<html>
<head>
	<title></title>

</head>
<body>


<form action="post">
	<input type="text" name="test" />
	<input type="submit" value="submit" />
</form>

<div class="test ppp">test1</div>
<br />
<div class="test">test2</div>
<br />
<div class="test">test3</div>


<script type="text/javascript">
	(function( window ) {

		function jQuery( a ) {

			if( typeof a === "function" ) {
				return this.set_selector( window ).load( a );
			} else {
				return this.set_selector( a );
			}
		}

		jQuery.fn = jQuery.prototype;

		jQuery.fn.set_selector = function( a ) {

			this.selector = a;

			if( typeof this.selector == "string" ) {
				this.selected = document.querySelectorAll( this.selector );
			} else if( typeof this.selector == "object" ) {
				this.selected = [this.selector];
			} else {
				this.selected = this.selector;
			}

			return this;
		}

		jQuery.each = function( object, callback ) {

			var len = object.length;
			for( var i = 0; i < len; i++ ) {
				if( callback.call( object[i], i, object[i] ) === false ) {
					break;
				}
			}
			return this;
		}


		jQuery.fn.each = function( a ) {

			if( typeof a !== 'undefined' )
				jQuery.each( this.selected, a );		

			return this;
		}


		jQuery.fn.eq = function( a ) {
			this.selector = this.selected[a];
			return this;
		}

		jQuery.fn.html = function( a ) {

			if( typeof a === 'undefined' ) {
				var html = '';

				this.eq(0).each(function() {
					html = this.innerHTML;
				});

				return html;			
			} else {

				return this.each(function() {
					this.innerHTML = a;
				});

			}
		}

		jQuery.fn.attr = function( a, b ) {
			if( typeof b === 'undefined' ) {
				var out = '';
				this.each(function() {
					out = this.getAttribute( a );
				});

				return out;			
			} else {

				return this.each(function(  ) {
					this.setAttribute( a, b );
				});

			}
		}		


		jQuery.fn.css = function( a, b ) {
			if( typeof b === 'undefined' ) {
				var out = '';
				this.each(function() {
					out = this.style[ a ];
				});

				return out;			
			} else {

				return this.each(function(  ) {
					this.style[ a ] =  b;
				});

			}
		}

		jQuery.fn.on = function( event, a ) {
			return this.each(function() {
				var that = this;
				this.addEventListener( event, function( e ) {
					if( ! a.call( that, e ) ) {
						e.preventDefault();
					}
				});
			});				
		}

		jQuery.fn.bind = jQuery.fn.on;

		jQuery.fn.unbind = function( a ) {
			return this.each(function() {
				this.removeEventListener( a, function() {});
			});
		}

		jQuery.fn.trigger = function( a ) {
			var event = new MouseEvent( a , {
				'view': window,
				'bubbles': true,
				'cancelable': true
			} );

			return this.each(function() {
				return this.dispatchEvent( event );
			});
		}

		jQuery.each( [ "focusin", "focusout", "load", "beforeunload", "unload", "change", "click", "dblclick", "focus", "blur", "reset", "submit", "resize", "scroll", "mouseover", "mouseout", "mouseup", "mousedown", "mouseenter", "mousemove", "mouseleave", "contextmenu", "wheel", "keydown", "keypress", "keyup", "select" ], function( k, name ) {
			jQuery.fn[ name ] = function( a ) {
				return this.on( name, a );
			};
		});

		function $( a ) {
			return new jQuery( a );
		}

		$.fn = jQuery.fn;

		window.$ = window.jQuery = $;

	})( window );

	(function( $ ) {
		$.inArray = function( val, array ) {
			for( x in array ) {
				if( array[x] === val ) {
					return x;
				}
			}

			return -1;
		}

		$.fn.hasClass = function( a ) {
			var ret;
			this.each(function() {
				var classes = $(this).attr("class").split(/\s+/g);

				if( $.inArray( a, classes ) !== -1 ) {
					ret = true;
				} else {
					ret = false;	
				}

			});

			return ret;
		}

		$.fn.serialize = function() {
			var ret = {};
			this.each(function(){
				var data = new FormData( this );

				for(var pair of data.entries()) {
				   ret[ pair[0] ] = pair[1];
				}				
			});

			return ret;
		}

	})( jQuery );



	//Define plugin outsize closure
	$.fn.test = function() {
		console.log('in test');
	};

	//Use with jQuery instead $
	jQuery(".test").test();


	//Dom ready
	$(function() {

		$(".test").each(function() {
			console.log('in each');
			console.log( $(this).html() );
		
		});

		$(".test").css( "background", "red" ).click(function() {
			
			console.log( $(this).attr('class') );

			if( $(this).hasClass("ppp") ) {
				console.log('Class ppp exist');
			}

			console.log( $(this).html() );

			$(this).html('changed');

			console.log( $(this).attr('class') );

		}).eq(1).trigger("click");



		$("form").submit(function() {

			console.log( $(this).serialize() );

			return false;
		});
	});

</script>


</body>


</html>